# RenovateBot `packageManager` SHA512 issue repro

This is a minimal repo for a minimal repro of an issue I encountered with Renovate's automated update to the `packageManager` field in a few projects.

## The Issue

Renovate generated a PR which upgraded the `packageManger` field (the root-level one, used by `corepack`) as follows:

```
-   "packageManager": "pnpm@10.12.4+sha512.5ea8b0deed94ed68691c9bad4c955492705c5eeb8a87ef86bc62c74a26b037b08ff9570f108b2e4dbd1dd1a9186fea925e527f141c648e85af45631074680184"

+   "packageManager": "pnpm@10.13.1"
```

Note the missing SHA512. As far as I can see, the hash is optional, but it caused the following error:

> ⚠️ Artifact update problem
>
> Renovate failed to update an artifact related to this branch. You probably do not want to merge this PR as-is.
>
> ♻ Renovate will retry this branch, including artifacts, only when one of the following happens:
>
> * any of the package files in this branch needs updating, or
> * the branch becomes conflicted, or
> * you click the rebase/retry checkbox if found above, or
> * you rename this PR's title to start with "rebase!" to trigger it manually
>
> The artifact failure details are included below:
>
> **File name: undefined**
>
> ```
> Command failed: corepack use pnpm@10.12.4
> ```


## Manual Workaround

1. Clone the repo locally
2. Run `corepack use pnpm`

This updates the `packageManager` field to have the right hash and the PR proceeds as normal.


## Steps to reproduce

1. Fork this repro
2. Enable renovate using the renovate.json included
3. Observe that the first PR generated by Renovate is missing the SHA512


## Current investigation

As far as I can see


## Example PR

https://github.com/lumphammer/shared-fvtt-bits/pull/206

This happened on more than one repo but this is the only public one.


## Discussion thread

https://github.com/renovatebot/renovate/discussions/36904
